{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="admin-container">
    <div class="admin-header">
        <h1>Available Meetings</h1>
    </div>
    
    {% if meetings %}
    <div class="meetings-list">
        {% for meeting in meetings %}
        <div class="meeting-card status-{{ meeting.status }}">
            <div class="meeting-header-info">
                <h3>{{ meeting.title }}</h3>
                <span class="meeting-status status-{{ meeting.status }}">
                    {% if meeting.status == 'live' %}<span class="icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="8"></circle></svg></span> Live Now{% else %}<span class="icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg></span> Scheduled{% endif %}
                </span>
            </div>
            
            <p class="meeting-description">{{ meeting.description|default:"No description" }}</p>
            
            <div class="meeting-details-grid">
                <div class="detail-item-small">
                    <span class="icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg></span>
                    <div>
                        <p class="label">Teacher</p>
                        <p class="value">{{ meeting.teacher.username }}</p>
                    </div>
                </div>
                
                <div class="detail-item-small">
                    <span class="icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg></span>
                    <div>
                        <p class="label">Date & Time</p>
                        <p class="value">{{ meeting.scheduled_time|date:"M d, Y - h:i A" }}</p>
                    </div>
                </div>
                
                <div class="detail-item-small">
                    <span class="icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg></span>
                    <div>
                        <p class="label">Duration</p>
                        <p class="value">{{ meeting.duration_minutes }} minutes</p>
                    </div>
                </div>
                
                <div class="detail-item-small">
                    <span class="icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg></span>
                    <div>
                        <p class="label">Participants</p>
                        <p class="value">{{ meeting.participants.count }}</p>
                    </div>
                </div>
            </div>
            
            <div class="meeting-actions">
                <a href="{% url 'join_meeting' meeting.meeting_code %}" class="btn-view">
                    {% if meeting.status == 'live' %}Join Now{% else %}View Details{% endif %}
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="no-cameras">
        <p><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg></span> No meetings available at the moment</p>
        <p style="margin-top: 1rem; color: #65676b;">Check back later for scheduled meetings</p>
    </div>
    {% endif %}
</div>
{% endblock %}
